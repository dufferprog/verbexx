// core_dll.cpp

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////
////        
////     ============
////     core_dll.cpp -- DllMain() function for core.dll   (also has all cross-DLL globals, and thread-local globals for core.dll) 
////     ============
//// 
//// 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "h__include.h"
#pragma hdrstop("../pch/pch_std.pch")

#define M_DEFINE_GLOBALS
#define M_DEFINE_THREAD_LOCAL
#define M_IN_CORE_DLL

#include "h__common.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

BOOL APIENTRY DllMain( HANDLE hModule 
                     , DWORD  ul_reason_for_call 
                     , LPVOID lpReserved
                     )
{
    switch( ul_reason_for_call )
    {
        case DLL_PROCESS_ATTACH:
            M__(M_out(L"core_dll: DllMain() DLL_PROCESS_ATTACH -- called");)
            break;
        case DLL_THREAD_ATTACH:
            M__(M_out(L"core_dll: DllMain() DLL_THREAD_ATTACH -- called");)
            break;
        case DLL_THREAD_DETACH:
            M__(M_out(L"core_dll: DllMain() DLL_THREAD_DETACH -- called");)
            break;
        case DLL_PROCESS_DETACH:
            M__(M_out(L"core_dll: DllMain() DLL_PROCESS_DETACH -- called");)
            break;
        default: 
            M_y(M_out(L"core_dll: DllMain() Unknown reason -- called");)
            break;   
    }

    return TRUE;
}


//_____________________________________________________________________________________________________________________
//\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
//\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
//\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
//\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
//"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""